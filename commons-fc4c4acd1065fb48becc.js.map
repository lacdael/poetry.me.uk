{"version":3,"file":"commons-fc4c4acd1065fb48becc.js","mappings":"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","sources":["webpack://poetry.me.uk/./src/images/market.svg","webpack://poetry.me.uk/./src/components/hourglass.js","webpack://poetry.me.uk/./src/images/leave.png","webpack://poetry.me.uk/./src/images/nft.png","webpack://poetry.me.uk/./src/components/header.js","webpack://poetry.me.uk/./src/images/wallet.svg","webpack://poetry.me.uk/./src/components/modal.js","webpack://poetry.me.uk/./src/components/layout.js","webpack://poetry.me.uk/./src/globals.js"],"sourcesContent":["export default \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDIwMDEwOTA0Ly9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAxL1JFQy1TVkctMjAwMTA5MDQvRFREL3N2ZzEwLmR0ZCI+CjxzdmcgdmVyc2lvbj0iMS4wIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiB3aWR0aD0iMTI4LjAwMDAwMHB0IiBoZWlnaHQ9IjEyOC4wMDAwMDBwdCIgdmlld0JveD0iMCAwIDEyOC4wMDAwMDAgMTI4LjAwMDAwMCIKIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIG1lZXQiPgo8bWV0YWRhdGE+CkNyZWF0ZWQgYnkgcG90cmFjZSAxLjE1LCB3cml0dGVuIGJ5IFBldGVyIFNlbGluZ2VyIDIwMDEtMjAxNwo8L21ldGFkYXRhPgo8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjAwMDAwMCwxMjguMDAwMDAwKSBzY2FsZSgwLjEwMDAwMCwtMC4xMDAwMDApIgpmaWxsPSIjMDAwMDAwIiBzdHJva2U9Im5vbmUiPgo8cGF0aCBkPSJNNDYxIDExNDQgYy04NCAtMTExIC04OSAtMTM2IC0yNiAtMTQ0IGw0MCAtNSA3IC01NSBjMyAtMzAgNiAtODcgNwotMTI2IDEgLTQwIDYgLTc1IDEzIC04MiAxNyAtMTcgMTE3IC0xNiAxMjQgMiAzIDggOCA3MCAxMiAxMzcgbDcgMTI0IDM1IDMKYzM1IDQgNjAgMTcgNjAgMzMgMCA0IC0zNCA1MyAtNzUgMTA4IC0xMDEgMTM1IC0xMDcgMTM2IC0yMDQgNXoiLz4KPHBhdGggZD0iTTgzNiAxMTM0IGMtMyAtOSAtNiAtNTkgLTYgLTExMiAwIC0xMzAgLTQgLTE0MiAtNDUgLTE0MiAtNDEgMCAtNjIKLTIzIC00OSAtNTUgNSAtMTMgMzkgLTYyIDc3IC0xMDkgOTAgLTExNSA5NCAtMTE1IDE5MiAxNCA0MSA1NCA3NSAxMDYgNzUgMTE0CjAgMjAgLTMxIDM2IC02OSAzNiBsLTMxIDAgMCAxMTYgYzAgNjMgLTUgMTI0IC0xMCAxMzUgLTkgMTUgLTIyIDE5IC02OSAxOQotNDQgMCAtNjAgLTQgLTY1IC0xNnoiLz4KPHBhdGggZD0iTTEwNjMgNTUzIGMtNDYgLTQ5IC04MyAtOTcgLTgzIC0xMDggMCAtMzEgLTM2IC04MyAtNzIgLTEwNSAtMjggLTE3Ci01MSAtMjAgLTE0NCAtMjAgLTEyNyAwIC0xNTggMTQgLTExOCA1NCAxMiAxMiAzOCAxNiAxMTUgMTYgOTMgMCAxMDIgMiAxMjQKMjUgMzMgMzIgMzMgNzggMCAxMTAgLTIzIDI0IC0yOCAyNSAtMTczIDI1IC0xMTEgMCAtMTYxIDQgLTE5NiAxNiAtNjQgMjIKLTE2NSAxNSAtMjI2IC0xNiAtNDMgLTIxIC0yNzMgLTIzNyAtMjY4IC0yNTAgMiAtNCA2MyAtNjQgMTM2IC0xMzUgbDEzMyAtMTI4CjM3IDM2IDM3IDM2IDI1MCAzIGMyNDIgMyAyNTEgNCAyOTEgMjcgMjYgMTQgMTAyIDkyIDE5OCAyMDMgMTQ0IDE2NSAxNTYgMTgyCjE1NiAyMTggMCA0NiAtMzUgODAgLTg0IDgwIC0yNiAwIC00NCAtMTQgLTExMyAtODd6Ii8+CjwvZz4KPC9zdmc+Cg==\"","import React from \"react\"\n\nconst Hourglass = () => (\n    \n    <div id=\"hourglass-loader\"><svg viewBox=\"0 0 70 100\" width=\"70\" height=\"100\">\n  <defs>\n    <path id=\"hourglass\" d=\"M 5 5 h 60 q 0 22.5 -28 45 28 22.5 28 45 h -60 q 0 -22.5 28 -45 -28 -22.5 -28 -45z\" />\n    <clipPath id=\"clip--hourglass\">\n      <use href=\"#hourglass\" />\n    </clipPath>\n  </defs>\n  <g clipPath=\"url(#clip--hourglass)\">\n    <rect id=\"sand\" width=\"70\" height=\"50\" fill=\"hsl(210, 40%, 20%)\" stroke=\"none\" />\n  </g>\n  <g stroke=\"hsl(240, 15%, 5%)\" strokeWidth=\"4\" fill=\"none\" strokeLinecap=\"round\" strokeLinejoin=\"round\">\n    <use href=\"#hourglass\" />\n    <path d=\"M 5 5 v 90\" />\n    <path d=\"M 65 5 v 90\" />\n  </g>\n  <g fill=\"hsl(240, 15%, 5%)\" stroke=\"none\">\n    <rect width=\"70\" height=\"5\" />\n    <rect width=\"70\" height=\"5\" y=\"95\" />\n    <circle r=\"5\" cx=\"5\" cy=\"50\" />\n    <circle r=\"5\" cx=\"65\" cy=\"50\" />\n  </g>\n</svg></div>\n    \n    \n)\n\nexport default Hourglass\n","export default __webpack_public_path__ + \"static/leave-f0247d1c0513920e2ae649653d1812cb.png\";","export default __webpack_public_path__ + \"static/nft-90d736ab0fb6eac4a718e35f48c70b2d.png\";","import { Link } from \"gatsby\"\nimport PropTypes from \"prop-types\"\nimport React from \"react\"\nimport IMG_LEAVE from '../images/leave.png';\nimport IMG_WALLET from '../images/wallet.svg';\nimport IMG_MARKET from '../images/market.svg';\nimport IMG_NFT from '../images/nft.png';\n\n//const quote = \"A legend's path to guide your own\";\nconst quote = \"The restless spirits long to guide\";\nconst Header = ({ siteTitle, context, address, isConnected, eventHandler }) => (\n    <>\n    <div style={{maxWidth:`1080px`,textAlign:`center`,margin:`auto`,position:`relative`}}>\n    { !isConnected && <em id='quote'>{quote}</em> }\n\n    <button style={{position:`absolute`,top:`0`,right:`0`,fontWeight:`bolder`,margin:`0.5em`,height:`2em`}}\n    type=\"button\"\n    onClick={ e => eventHandler( \"connect\" ,{} ) }\n    >{ isConnected ? < img src={IMG_LEAVE} style={{height:`100%`}} /> : <>Connect<img src={IMG_NFT} style={{height:`1rem`}}/></> }</button>\n\n\n    { (isConnected) &&\n        <div style={{display:\"flex\",justifyContent:\"center\"}}>\n\t <button style={{margin:`0.5em`,height:`2em`}}\n            onClick={ e => eventHandler( \"context\" ,{} ) } >\n                <img src={ context === \"market\" ? IMG_WALLET : IMG_MARKET } style={{height:`100%`}} /> </ button>\n        <button style={{margin:`0.5em`}}\n        type=\"button\"\n        ><span style={{\n            maxWidth: `9em`,\n                overflow: `hidden`,\n                textOverflow: `ellipsis`,\n                display: `block`,\n                whiteSpace: `nowrap`\n        }}>{ address }</span></button></div>}\n\n\n\n\n\n    </div>\n    { (!isConnected) &&\n        <nav>\n        <div style={{\n            margin: `0 auto`,\n                maxWidth: 1080,\n        }}>\n        <ul>\n        <li><Link to=\"/books\">Books</Link></li>\n        <li><Link to=\"/excerpts\">Excerpts</Link></li>\n        <li><Link to=\"/blog\">Blog</Link></li>\n        <li><Link to=\"/contact\">Contact</Link></li>\n        </ul>\n        </div>\n        </nav> }\n    </>\n)\n\nHeader.propTypes = {\n    siteTitle: PropTypes.string,\n}\n\nHeader.defaultProps = {\n    siteTitle: ``,\n}\n\nexport default Header\n","export default \"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDIwMDEwOTA0Ly9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAxL1JFQy1TVkctMjAwMTA5MDQvRFREL3N2ZzEwLmR0ZCI+CjxzdmcgdmVyc2lvbj0iMS4wIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiB3aWR0aD0iMTkxLjAwMDAwMHB0IiBoZWlnaHQ9IjE2NS4wMDAwMDBwdCIgdmlld0JveD0iMCAwIDE5MS4wMDAwMDAgMTY1LjAwMDAwMCIKIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIG1lZXQiPgo8bWV0YWRhdGE+CkNyZWF0ZWQgYnkgcG90cmFjZSAxLjE1LCB3cml0dGVuIGJ5IFBldGVyIFNlbGluZ2VyIDIwMDEtMjAxNwo8L21ldGFkYXRhPgo8ZyB0cmFuc2Zvcm09InRyYW5zbGF0ZSgwLjAwMDAwMCwxNjUuMDAwMDAwKSBzY2FsZSgwLjEwMDAwMCwtMC4xMDAwMDApIgpmaWxsPSIjMDAwMDAwIiBzdHJva2U9Im5vbmUiPgo8cGF0aCBkPSJNNjMgMTYzMCBjLTY2IC00MCAtNjMgLTQgLTYzIC04MDcgMCAtNTYyIDMgLTczNCAxMyAtNzUzIDcgLTEzIDI4Ci0zNSA0NiAtNDcgbDM0IC0yMyA3OTQgMCBjODUyIDAgODIxIC0yIDg2OCA1MCAxNyAxOSAyMSA0MCAyNSAxNTggbDUgMTM2IDMxCjggYzE4IDQgNDYgMjQgNjMgNDMgbDMxIDM2IDAgMjY0IDAgMjY0IC0zMSAzNiBjLTE3IDE5IC00NSAzOSAtNjMgNDMgbC0zMSA4Ci01IDE1NiAtNSAxNTcgLTMwIDMxIGMtMTYgMTcgLTQzIDM0IC02MCAzOCAtMjkgOCAtMzAgMTEgLTM1IDczIC02IDc1IC0yMAoxMDMgLTYzIDEyOSAtMzEgMTkgLTU3IDIwIC03NjIgMjAgLTcwNiAwIC03MzEgLTEgLTc2MiAtMjB6IG0xMzk2IC0xMjEgYzI4Ci0xMCA3NCAtNjkgNTQgLTY5IC02IDAgLTEzNTYgMCAtMTM4MSAwIC0xIDAgNCAxMyAxMyAzMCA5IDE4IDI2IDMyIDQzIDM2IDE1CjMgMzIgNyAzNyA5IDYgMiAyNzggNCA2MDYgNCA0MTIgMSA2MDYgLTIgNjI4IC0xMHogbTE1OCAtMjMzIGMyNyAtMjQgMjggLTI3CjI4IC0xMjggbDAgLTEwMyAtMjMwIC0yIC0yMjkgLTIgLTYzIC0zMSBjLTY3IC0zMyAtMTA5IC03NyAtMTQ1IC0xNTAgLTIwIC0zOQotMjMgLTYxIC0yMyAtMTY1IDAgLTEwNCAzIC0xMjYgMjIgLTE2NSAzNiAtNzMgNzkgLTExNyAxNDYgLTE0OSBsNjIgLTMwIDIzMAotMyAyMzAgLTMgMyAtNTUgYzIgLTMwIDEgLTcwIC0zIC04OCAtMTIgLTY2IDIxIC02MyAtNzU1IC02MiAtNDE3IDAgLTcwOSA0Ci03MjAgMTAgLTM5IDIxIC00MSA0NyAtMzggNTg0IGwzIDUxOCAyOCAyNCAyOCAyNCA2OTkgMCA2OTkgMCAyOCAtMjR6IG0xMzAKLTM5MCBsMjggLTI0IDAgLTE2NyAwIC0xNjcgLTI4IC0yNCBjLTI4IC0yNCAtMzAgLTI0IC0yNDkgLTI0IC0yNDAgMCAtMjc2IDYKLTMzMiA1MSAtMTI1IDEwNCAtODggMzEwIDY2IDM2NiAyMiA3IDExMiAxMiAyNjAgMTIgMjI2IDEgMjI3IDEgMjU1IC0yM3oiLz4KPHBhdGggZD0iTTEyMzUgNzQ4IGMtMjEgLTI1IC0yNSAtMzggLTIxIC02MiAyMiAtMTA3IDE3NiAtOTkgMTc2IDkgMCA4MiAtMTAxCjExNyAtMTU1IDUzeiIvPgo8L2c+Cjwvc3ZnPgo=\"","import React from 'react';\n\nclass Modal extends React.Component {\n\n\tconstructor(props){\n\t\tsuper(props);\n\t\tthis.state = { show: true };\n\n\t}\n\n\tclickOut = (e) => {\n\t\tif ( e.target.id == \"modal\" ) this.props.evnt(null);\n\t};\n\n\trender ( ) {\n\n\t\treturn ( \n\t\t\t<div id=\"modal\" onClick={ this.clickOut } >\n\t\t\t<div id=\"modal-inner\" style={ this.props.style } >\n\t\t\t<div id=\"close\" onClick={ this.props.evnt.bind(null,null) }>&times;</div>\n\t\t\t<>\n\t\t\t{ this.props.children }\n\t\t\t</>\n\t\t\t</div>\n\t\t\t</div>\n\t\t);\n\n\t}\n\n}\n\nexport default Modal;\n","import React, { useEffect, useState } from 'react';\n/**\n * Layout component that queries for data\n * with Gatsby's useStaticQuery component\n *\n * See: https://www.gatsbyjs.com/docs/use-static-query/\n */\n\nimport PropTypes from \"prop-types\"\nimport { useAccount,\n\tuseNetwork,\n\tuseDisconnect,\n\tconfigureChains,\n\tcreateConfig,\n\tWagmiConfig } from 'wagmi'\nimport {\n\treadContract,\n\tprepareWriteContract,\n\twriteContract\n} from '@wagmi/core'\nimport { useWeb3Modal } from '@web3modal/react'\nimport { parseEther, formatEther } from 'viem'\nimport IMG_MARKET from '../images/market.svg';\nimport '../globals'\nimport { StaticQuery, graphql, Link } from \"gatsby\"\nimport CONTRACT_DATA_NFT from '../contracts/NFT.json';\nimport CONTRACT_DATA_MARKET from '../contracts/NFTMarket.json';\nimport Hourglass from \"./hourglass\"\nimport Header from \"./header\"\nimport Modal from \"./modal\"\nimport \"./layout.css\"\n\nimport { EthereumClient, w3mConnectors, w3mProvider } from '@web3modal/ethereum'\nimport { Web3Modal } from '@web3modal/react'\nimport { harmonyOne } from 'wagmi/chains'\n\n\nconst ABI_NFT = CONTRACT_DATA_NFT.abi;\nconst ABI_MARKET = CONTRACT_DATA_MARKET.abi;\nconst contracts = {\n\t\"harmony\":{\n\t\t\"nft\" : \"0x91BD719a249F6AAFDE5850392e1229e962bf3Df0\",\n\t\t\"market\":\"0x22bF9B8f4568be87b0557c30505fCba698B06367\",\n\t}\n}\n\nconst chains = [ harmonyOne ];\nconst projectId = '061d544ba5120e2746c84afb1a9e0adb';\nconst { publicClient } = configureChains(chains, [w3mProvider({ projectId })])\nconst wagmiConfig = createConfig({\n\tautoConnect: true,\n\tconnectors: w3mConnectors({ projectId, chains }),\n\tpublicClient\n})\nconst ethereumClient = new EthereumClient(wagmiConfig, chains)\nconst SYMBOL = \"¢\";\n\nconst Toast = ( props ) => { return <div className=\"toast\"><strong>{ props.str }</strong></div> };\n\nconst Nft = ( props ) => {\n\tif ( props.token === undefined ) {\n\t\tconsole.log( props );\n\t\treturn <div className=\"nft\">None</div>\n\t} else return  <div className=\"nft\"\n\tonClick={ e => props.eventHandler() }\n\ttitle={ props.token.name } style={ props.style ? props.style : {} }  >\n\t\t<img src={props.token.image} alt={ props.token.description} />\n\t\t</div>\n};\n\nconst NftView = ( props ) => {\n\tconst [more,setMore] = useState(false);\n\tconst [showSellForm,setShowSellForm] = useState(false);\n\tconst [approved,setApproved] = useState(false);\n\tconst [price,setPrice] = useState( (props.marketInfo ? props.marketInfo.price : 0) );\n\n\tuseEffect(() => {\n\n\t\tconsole.log( props.marketInfo );\n\t\tconsole.log( formatEther( price ) );\n\n\t    if ( props.isConnected && ! props.marketInfo ) {\n\t        props.getApprovedNFT( props.token.id ).then( r => {\n\t\t\tsetApproved( r );\n\t\t}).catch( e => {\n\t\t    setApproved( false );\n\t\t});\n\t    }\n\t}, [props])\n\n\tconst styles = {\n\t\timg : {\n\t\t\twidth: `42vh`,\n\t\t\tmargin: `1em auto`,\n\t\t\tdisplay: `block`,\n\t\t\tborder: `0.5em solid var(--main)`,\n\t\t\tborderRadius: `1em` },\n\t\tbtnSell:{ borderRadius:`2em`,margin:`0.5em`,boxShadow: `0 0 4px 1px  var(--dark)`,borderColor: `var(--emphasis)`},\n\t\tbtnApprove: { margin:`1em`,textAlign:`center`},\n\t\tdetails: {\n\t\t\toverflow: `auto`,\n\t\t\twidth: `90%`,\n\t\t\tmargin: `auto`,\n\t\t\tdisplay: `block`,\n\t\t\tborderRadius: `1em`,\n\t\t\theight: `5em`\n\t\t}\n\t};\n\n\tif ( props.token === undefined ) return <div className=\"nft\">None</div>\n\t\telse return  <div title={ props.token.name } style={ props.style ? props.style : {} }  >\n\t\t<img src={ props.token.image} alt={ props.token.description}\n\tstyle={ styles.img }/>\n\t\t{ more ? <>  { ( !props.marketInfo ) ?  ( !showSellForm ? <button style={ styles.btnSell} onClick={ e => setShowSellForm( true ) }><img src={IMG_MARKET} alt=\"nft market\" style={{height:`1rem`}} /> </ button> :\n\n\t\t\t\t<div style={ styles.btnApprove }><button disabled={ approved } onClick={ e => {\n\t\t\t\t\tprops.approveNFT( props.token.id ).then( r => setApproved( r ) ).catch( e => console.error(e) )\n\t\t\t\t} } type=\"button\" className=\"action\" style={{width:`30%`}}>Approve</button><input type=\"number\" disabled={ !approved } onBlur={ e => setPrice( e.target.value ) } placeholder=\"price\" style={{width:`30%`}}/><button disabled={ !approved && price <= 0 } onClick={ e => {\n\t\t\t\t\tprops.sellNFT( props.token.id , parseEther( price ) );\n\t\t\t\t} } className=\"action\" type=\"button\" style={{width:`30%`}} >sell</button></div> ) :  null }\n\n\t\t\t<textarea readOnly={true} value={ JSON.stringify( props.token) }\n\t\t\tstyle={styles.details}\n\t\t\t></textarea></>  :\n\t\t\t( props.marketInfo ? <div style={{margin:`auto`,display:`block`,textAlign:`center`}} ><button type=\"button\" className=\"action\" style={{ background:`var(--light)`,borderColor:`var(--alert)` }} onClick={ e => props.buyNFT( props.marketInfo.itemId , props.marketInfo.price ) } >BUY</button><span style={{margin:`1em`}}>{ formatEther( props.marketInfo.price ) }<em>{SYMBOL}</em></span></div> : <button type=\"button\" className=\"action\" onClick={ e => setMore( true ) }>. . .More</button> ) }\n\t\t</div>\n}\n\nfunction TitledLayout( props ) {\n\n\tconst [toast,setToast] = useState(null);\n\tconst [spinner,setSpinner] = useState(false);\n\tconst [myNFTs,setMyNFTs] = useState([]);\n\tconst [marketItems,setMarketItems] = useState([]);\n\tconst [nfts,setNFTs] = useState({});\n\tconst [context,setContext] = useState(\"wallet\");\n\tconst [view,setView] = useState(null);\n\tconst { address, isConnected } = useAccount()\n\tconst { chain, chains } = useNetwork()\n\tconst { open, close } = useWeb3Modal()\n\tconst { disconnect } = useDisconnect()\n\n\tconst init = async () => {\n\t    if (spinner) return;\n\t    console.log(`init(); account: ${address}, chain : ${chain.network}`);\n\t    setSpinner( true );\n\t    callWalletOfOwner().then( r => {\n\t        callFetchMarketItems().then( r => {\t\t\t\t\t\n\t            setSpinner(false);\n\t        }).catch( e => errorHandler(\"callFetchMarketItems\",e ) && setSpinner(false) );\n\t    }).catch( e => {\n\t\t errorHandler(\"callWalletOfOwner\",e );\n\t\t  console.error( e );\n\t\t  console.log( chain );\n\t\t  setSpinner(false);\n\t\t  disconnect();\n\t    });\n\t}\n\n\tuseEffect(() => {\n\t\tif ( isConnected && undefined !== chain && undefined !== address ) init();\n\t}, [chain, isConnected, address ]);\n\n\tconst eventHandler = ( what , data ) =>  {\n\t\tif ( null == what ) setView(null);\n\t\tswitch (what) {\n\t\t\tcase \"connect\": {\n\t\t\t\tif ( !isConnected ) open();\n\t\t\t\telse open();//disconnect();\n\t\t\t} break;\n\t\t\tcase \"nft\": {\n\t\t\t\tsetView(data);\n\t\t\t} break;\n\t\t\tcase \"context\": {\n\t\t\t\tif ( context === \"market\" ) {\n\n\t\t\t\t\tif ( myNFTs.length === 0 ) doToast(\"First buy some NFTs\");\n\t\t\t\t\telse setContext(\"wallet\");\n\t\t\t\t} else setContext(\"market\");\n\t\t\t} break;\n\t\t}\n\t}\n\n\tconst callFetchMarketItems = ( ) => {\n\t\treturn new Promise( (resolve, reject) => {\n\t\t\treadContract({\n\t\t\t\taddress: contracts[ chain.network ]['market'],\n\t\t\t\tabi: ABI_MARKET,\n\t\t\t\tfunctionName: 'fetchMarketItems',\n\t\t\t}).then( (rslt) => {\n\t\t\t\tlet nftIDs = [];\n\t\t\t\tconst allNfts = nfts;\n\t\t\t\tlet marketItemsSnapshot = [];\n\t\t\t\trslt.forEach( i => {\n\t\t\t\t\tmarketItemsSnapshot.push(\n\t\t\t\t\t    {\n\t\t\t\t\t\titemId: i[\"itemId\"],\n\t\t\t\t\t\tnftContract: i[\"nftContract\"],\n\t\t\t\t\t\towner:i[\"owner\"],\n\t\t\t\t\t\tprice:i[\"price\"],\n\t\t\t\t\t\tseller:i[\"seller\"],\n\t\t\t\t\t\tsold:i[\"sold\"],\n\t\t\t\t\t\ttokenId:i[\"tokenId\"]\n\t\t\t\t\t    }\n\t\t\t\t\t);\n\t\t\t\t\tif ( ! ( i[\"tokenId\"] in nfts ) ) nftIDs.push( i[\"tokenId\"] );\n\t\t\t\t\telse {\n\t\t\t\t\t\t\n\t\t\t\t\t\tconsole.log(`id: ${ i[\"tokenId\"] } - ${ ( i[\"tokenId\"] in nfts ) }  `);\n\t\t\t\t\t}\n\t\t\t\t} );\n\t\t\t\tPromise.all( nftIDs.map( async (anID) => {\n\t\t\t\t\treadContract({\n\t\t\t\t\t\taddress: contracts[ chain.network ]['nft'],\n\t\t\t\t\t\tabi: ABI_NFT,\n\t\t\t\t\t\tfunctionName: 'tokenURI',\n\t\t\t\t\t\targs: [ anID ]\n\t\t\t\t\t}).then( ( data ) => {\n\t\t\t\t\t\tconst nftsSnapshot = nfts; \n\t\t\t\t\t\tnftsSnapshot[ anID ] = (data.startsWith(\"data\") ? dataURLDecode( data ) : data);\n\t\t\t\t\t\tconsole.log( data );\n\t\t\t\t\t\tif ( Object.keys(nftsSnapshot).length === 0 ) console.log( \"1@@@@@@@@@@@@@@@ EMPTY!\" );\n\t\t\t\t\t\tsetNFTs( prev => ({ ...prev, ...nftsSnapshot }));\n\t\t\t\t\t}).catch(e => errorHandler(\"tokenURI\",e) && reject() );\n\t\t\t\t})).then( r => {\n\t\t\t\t        setMarketItems( marketItemsSnapshot );\n\t\t\t\t\tresolve();\n\t\t\t\t} ).catch( e => errorHandler(\"tokenURI\",e) && reject() );\n\t\t\t} ).catch( e => errorHandler(\"fetchMarketItems\",e) && reject() );\n\t\t});\n\t}\n\n\tconst callWalletOfOwner = ( ) => {\n\t\treturn new Promise( (resolve, reject) => {\n\t\t\treadContract({\n\t\t\t\taddress: contracts[ chain.network ]['nft'],\n\t\t\t\tabi: ABI_NFT,\n\t\t\t\tfunctionName: 'walletOfOwner',\n\t\t\t\targs: [ address ]\n\t\t\t}).then( (rslt) => {\n\t\t\t\tconst nftIDs = rslt.filter( i => ! ( i in nfts ) );\n\t\t\t\tPromise.all( nftIDs.map( async (anID) => {\n\t\t\t\t\tawait readContract({\n\t\t\t\t\t\taddress: contracts[ chain.network ]['nft'],\n\t\t\t\t\t\tabi: ABI_NFT,\n\t\t\t\t\t\tfunctionName: 'tokenURI',\n\t\t\t\t\t\targs: [ anID ]\n\t\t\t\t\t}).then( ( data ) => {\n\t\t\t\t\t\tconst nftsSnapshot = nfts; \n\t\t\t\t\t\tnftsSnapshot[ anID ] = (data.startsWith(\"data\") ? dataURLDecode( data ) : data);\n\t\t\t\t\t\tif ( Object.keys(nftsSnapshot).length === 0 ) console.log( \"2@@@@@@@@@@@@@@@ EMPTY!\" );\n\t\t\t\t\t\tsetNFTs( prev => ({ ...prev, ...nftsSnapshot }));\n\t\t\t\t\t}).catch(e => errorHandler(\"tokenURI\",e) && reject() );\n\t\t\t\t}) ).then( () =>  {\n\t\t\t\t\tsetMyNFTs( rslt );\n\t\t\t\t\tif ( rslt.length === 0 ) setContext(\"market\");\n\t\t\t\t\tresolve();\n\t\t\t\t} ).catch( e => errorHandler(\"tokenURI\",e) && reject() );\n\t\t\t} ).catch( e => errorHandler(\"walletOfOwner\",e) && reject() );\n\t\t});\n\t}\n\n\tconst dataURLDecode = ( url ) => {\n\t\ttry{\n\t\t\tlet tmp = url.split(',');\n\t\t\tlet type = tmp[0].split(\":\")[1];\n\t\t\tif (type === \"application/json;base64\" ){\n\t\t\t\tlet dataStr = atob(tmp[1]);\n\t\t\t\treturn JSON.parse ( dataStr );\n\t\t\t};\n\t\t} catch (err) {\n\t\t\tconsole.error(err);\n\t\t}\n\t\treturn \"\";\n\t};\n\n\tconst callMarketApprovedNFT = ( id ) => {\n\t\treturn new Promise( (resolve, reject) => {\n\t\t\treadContract({\n\t\t\t\taddress: contracts[ chain.network ]['nft'],\n\t\t\t\tabi: ABI_NFT,\n\t\t\t\tfunctionName: 'getApproved',\n\t\t\t\targs: [ id ]\n\t\t\t}).then( ( data ) => {\n\t\t\t\tfor (let i = 0; i < data.length; i++) {\n\t\t\t\t\tif ( data[i] === contracts[ chain.network ][\"market\"] ) resolve(true);\n\t\t\t\t}\n\t\t\t\tresolve( false );\n\t\t\t}).catch( e => errorHandler(\"callMarketApprovedNFT\",e) && reject( ) )\n\t\t});\n\t}\n\n\tconst marketApproveNFT = ( id ) => {\n\t\treturn new Promise( (resolve, reject) => {\n\t\t   prepareWriteContract({\n                \taddress: contracts[ chains.network ]['nft'],\n                        abi: ABI_NFT,\n                        functionName: 'approve',\n                        args: [ contracts[ chains.network][\"market\"], id ],\n                    }).then( ({request}) => {\n                        writeContract(request).then( (rsp) => {\n                            resolve( true );\n                        }).catch( e => errorHandler(\"marketApproveNFT\",e) && reject(e) );\n                    }).catch( e => errorHandler(\"marketApproveNFT\",e) && reject(e) );\n\t\t});\n\t}\n\n\tconst marketSellNFT = ( id , wei) => {\n\t\tconsole.log( `marketSellNFT( ${ contracts[ chains.network ][\"nft\"] } , ${ id } , ${ wei } )`);\n\t\tprepareWriteContract({\n                \taddress: contracts[ chains.network ]['market'],\n                        abi: ABI_MARKET,\n                        functionName: 'createMarketItem',\n                        args: [ contracts[ chains.network][\"nft\"], id, wei ],\n                }).then( ({request}) => {\n                        writeContract(request).then( (rsp) => {\n                            if ( rsp?.events?.MarketItemCreated ){\n\t\t\t\t    const i = rsp.events.MarketItemCreated.returnValues;\n\t\t\t\t    const tkn = i.tokenId;\n\t\t\t\t    setMarketItems( prev => ([ ...prev,\n\t\t\t\t\t    {\n\t\t\t\t\t\titemId: i.itemId,\n\t\t\t\t\t\tnftContract:i.nftContract,\n\t\t\t\t\t\towner:i.owner,\n\t\t\t\t\t\tprice:i.price,\n\t\t\t\t\t\tseller:i.seller,\n\t\t\t\t\t\tsold:i.sold,\n\t\t\t\t\t\ttokenId:i.tokenId\n\t\t\t\t\t    }\n\t\t\t\t\t]));\n\t\t\t\t   setMyNFTs( myNFTs.filter( i => tkn !== i ) );\n\t                   }\n\t\t\t}).catch( e => errorHandler(\"createMarketItem\",e) );\n\t\t}).catch( e => errorHandler(\"createMarketItem\",e) );\n\t}\n\n\tconst marketBuyNFT = ( id , wei ) => {\n\t\tconsole.log( `marketBuyNFT( ${ contracts[ chain.network ][\"nft\"]  } , ${ id } )`);\n\t\tprepareWriteContract({\n                \taddress: contracts[ chains.network ]['market'],\n                        abi: ABI_MARKET,\n                        functionName: 'createMarketSale',\n                        args: [ contracts[ chains.network][\"nft\"], id ],\n\t\t\tvalue: wei\n                }).then( ({request}) => {\n                        writeContract(request).then( (rsp) => {\n\t\t\t\tif ( rsp.hasOwnProperty(\"transactionHash\") ) {\n\t\t\t\t\tconst tkn = marketItems.filter( i => id === i[\"itemId\"] )[0][\"tokenId\"];\n\t\t    \t\t\tsetMyNFTs( prev => ([ ...prev, tkn ]) );\n\t\t    \t\t\tsetMarketItems( marketItems.filter( i => id !== i[\"itemId\"] ) );\n\t\t\t\t}\n\t\t\t}).catch( e => errorHandler(\"createMarketSale\",e) );\n\t\t}).catch( e => errorHandler(\"createMarketSale\",e) );\n\t\n\t}\n\n\tconst errorHandler = ( s , e ) => {\n\t\tconsole.log(e);\n\t\tif (s) doToast(`Error calling ${s}`);\n\t}\n\n\tconst doToast = ( s , t=4000 ) => {\n\t\tsetToast( s );\n\t\tsetTimeout( () => setToast(null), t );\n\t}\n\n\tconst MyNFTsView = () => {\n\t\treturn <> { myNFTs.map( (i,k) => <Nft key={k} token={ nfts[ i ] }\n\t\t\teventHandler={ eventHandler.bind(null, \"nft\", nfts[ i ] ) } /> ) } </>\n\t}\n\n\tconst MarketNFTsView = () => <> { marketItems.map( (i,k) => <Nft key={k} token={ nfts[ i[\"tokenId\"] ] }\n\t\t\teventHandler={ eventHandler.bind(null, \"nft\", nfts[ i[\"tokenId\"] ] ) } />\n\t\t)}\n\t\t\t</>\n\n\tconst Footer = () => { return <footer>\n\t\t\t<em>&copy; <Link to=\"/christian-lacdael\" style={{color:`var(--main)`,textDecoration:`revert`}}>Christian Lacdael</Link> { (new Date()).getFullYear() }</em>\n\t\t\t</footer> }\n\n\tconst dappAddress = () => {\n\n\t\tif ( undefined === chain ) return \"...\";\n\t\tif ( chain.network in contracts ) return contracts[ chain.network ][ context === \"wallet\" ? \"nft\": \"market\" ];\n\t}\n\n\treturn (\n\t\t<>\n\t\t<Header\n\t\tsiteTitle={ props.title || `Title`}\n\t\tcontext={ context }\n\t\tisConnected={ isConnected }\n\t\taddress={ dappAddress() }\n\t\teventHandler={ eventHandler } />\n\t\t<div style={{\n\t\t\tmargin: `0 auto`,\n\t\t\t\tmaxWidth: 1080,\n\t\t\t\tpadding: `0 1.0875rem 1.45rem`,\n\t\t}} >\n\t\t{ view != null && <Modal\n\t\t\tevnt={ eventHandler} >\n\t\t\t{ ( \"image\" in view ) ?\n\t\t\t\t<NftView token={ view }\n\t\t\t\tisConnected={ isConnected }\n\t\t\t\tmarketInfo={( myNFTs.includes( view.id ) ) ? null  : marketItems.filter( (i) => i[\"tokenId\"] === view.id )[0]  }\n\t\t\t\tapproveNFT={ marketApproveNFT }\n\t\t\t\tgetApprovedNFT={ callMarketApprovedNFT }\n\t\t\t\tsellNFT={ marketSellNFT }\n\t\t\t\tbuyNFT={ marketBuyNFT }\n\t\t\t\teventHandler={ eventHandler }\n\t\t\t\t/> : null } </Modal> }\n\t\t{ ( null !== toast ) && <Toast str={toast} /> }\n\t\t{ ( isConnected ) ?  ( ( context === \"market\" ) ? ( marketItems.length > 0 ? MarketNFTsView() : <Hourglass /> ) : MyNFTsView() )\n\t\t\t\t: <><main>{ props.children }</main><Footer /></>\n\t\t}\n\t\t</div>\n\t\t</>\n\t)\n}\n\n\nTitledLayout.propTypes = {\n\tchildren: PropTypes.node.isRequired,\n}\n\nconst Layout = ( props ) => {\n\treturn(\n\t\t<> <WagmiConfig config={wagmiConfig}>\n\t\t<StaticQuery\n\t\tquery={graphql`\n\tquery SiteTitleQuery {\n      site {\n\tsiteMetadata {\n\t  title\n\t}\n      }\n    }\n  `} render={ data => <TitledLayout title={data.site.siteMetadata.title} children={props.children} /> }\n\t\t/>\n\n\t\t</WagmiConfig>\n\t\t<Web3Modal projectId={projectId} ethereumClient={ethereumClient} defaultChain={harmonyOne} />\n\t\t</>\n\t);\n}\n\nexport default Layout\n","// Inject node globals into React Native global scope.\nglobal.Buffer = require('buffer').Buffer;\nglobal.process = require('process');\n"],"names":["id","viewBox","width","height","d","href","clipPath","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","y","r","cx","cy","Header","siteTitle","context","address","isConnected","eventHandler","style","maxWidth","textAlign","margin","position","top","right","fontWeight","type","onClick","e","src","IMG_LEAVE","IMG_NFT","display","justifyContent","IMG_MARKET","overflow","textOverflow","whiteSpace","Link","to","defaultProps","props","clickOut","target","evnt","state","show","render","this","bind","children","React","ABI_NFT","CONTRACT_DATA_NFT","ABI_MARKET","CONTRACT_DATA_MARKET","contracts","chains","harmonyOne","projectId","publicClient","configureChains","w3mProvider","wagmiConfig","createConfig","autoConnect","connectors","w3mConnectors","ethereumClient","EthereumClient","Toast","className","str","Nft","undefined","token","console","log","title","name","image","alt","description","NftView","useState","more","setMore","showSellForm","setShowSellForm","approved","setApproved","marketInfo","price","setPrice","useEffect","formatEther","getApprovedNFT","then","catch","styles","img","border","borderRadius","btnSell","boxShadow","borderColor","btnApprove","details","disabled","approveNFT","error","onBlur","value","placeholder","sellNFT","parseEther","readOnly","JSON","stringify","background","buyNFT","itemId","TitledLayout","toast","setToast","spinner","setSpinner","myNFTs","setMyNFTs","marketItems","setMarketItems","nfts","setNFTs","setContext","view","setView","useAccount","useNetwork","chain","useWeb3Modal","open","disconnect","close","useDisconnect","init","network","callWalletOfOwner","callFetchMarketItems","errorHandler","what","data","length","doToast","Promise","resolve","reject","readContract","abi","functionName","rslt","nftIDs","marketItemsSnapshot","forEach","i","push","nftContract","owner","seller","sold","tokenId","all","map","anID","args","nftsSnapshot","startsWith","dataURLDecode","Object","keys","prev","filter","url","tmp","split","dataStr","atob","parse","err","s","t","setTimeout","Footer","color","textDecoration","Date","getFullYear","padding","includes","prepareWriteContract","request","writeContract","rsp","wei","events","MarketItemCreated","returnValues","tkn","hasOwnProperty","k","key","WagmiConfig","config","StaticQuery","query","site","siteMetadata","Web3Modal","defaultChain","global","Buffer","require","process"],"sourceRoot":""}