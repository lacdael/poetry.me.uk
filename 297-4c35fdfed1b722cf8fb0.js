"use strict";(self.webpackChunkpoetry_me_uk=self.webpackChunkpoetry_me_uk||[]).push([[297],{87297:function(e,t,r){r.r(t),r.d(t,{ccipFetch:function(){return j},offchainLookup:function(){return E},offchainLookupAbiItem:function(){return S},offchainLookupSignature:function(){return P}});var a=r(29439),n=r(15861),c=r(64687),s=r.n(c),o=r(26215),u=r(93433),i=r(43144),l=r(15671),f=r(97326),d=r(60136),p=r(82963),h=r(61120),b=(r(84944),r(33792),r(70114)),y=r(85934),m=r(48126);function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=(0,h.Z)(e);if(t){var n=(0,h.Z)(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return(0,p.Z)(this,r)}}var v=function(e){(0,d.Z)(r,e);var t=k(r);function r(e){var a,n,c=e.callbackSelector,s=e.cause,o=e.data,i=e.extraData,d=e.sender,p=e.urls;return(0,l.Z)(this,r),n=t.call(this,s.shortMessage||"An error occurred while fetching for an offchain result.",{cause:s,metaMessages:[].concat((0,u.Z)(s.metaMessages||[]),[null!==(a=s.metaMessages)&&void 0!==a&&a.length?"":[],"Offchain Gateway Call:",p&&["  Gateway URL(s):"].concat((0,u.Z)(p.map((function(e){return"    ".concat((0,m.Gr)(e))})))),"  Sender: ".concat(d),"  Data: ".concat(o),"  Callback selector: ".concat(c),"  Extra data: ".concat(i)]).flat()}),Object.defineProperty((0,f.Z)(n),"name",{enumerable:!0,configurable:!0,writable:!0,value:"OffchainLookupError"}),n}return(0,i.Z)(r)}(y.G),w=function(e){(0,d.Z)(r,e);var t=k(r);function r(e){var a,n=e.result,c=e.url;return(0,l.Z)(this,r),a=t.call(this,"Offchain gateway response is malformed. Response data must be a hex value.",{metaMessages:["Gateway URL: ".concat((0,m.Gr)(c)),"Response: ".concat((0,b.P)(n))]}),Object.defineProperty((0,f.Z)(a),"name",{enumerable:!0,configurable:!0,writable:!0,value:"OffchainLookupResponseMalformedError"}),a}return(0,i.Z)(r)}(y.G),g=function(e){(0,d.Z)(r,e);var t=k(r);function r(e){var a,n=e.sender,c=e.to;return(0,l.Z)(this,r),a=t.call(this,"Reverted sender address does not match target contract address (`to`).",{metaMessages:["Contract address: ".concat(c),"OffchainLookup sender address: ".concat(n)]}),Object.defineProperty((0,f.Z)(a),"name",{enumerable:!0,configurable:!0,writable:!0,value:"OffchainLookupSenderMismatchError"}),a}return(0,i.Z)(r)}(y.G),x=r(60461),Z=r(6880),O=r(89574),L=r(72123),R=r(33249);function G(e,t){if(!(0,R.U)(e))throw new L.b({address:e});if(!(0,R.U)(t))throw new L.b({address:t});return e.toLowerCase()===t.toLowerCase()}var C=r(50996),M=r(68754),P="0x556f1830",S={name:"OffchainLookup",type:"error",inputs:[{name:"sender",type:"address"},{name:"urls",type:"string[]"},{name:"callData",type:"bytes"},{name:"callbackFunction",type:"bytes4"},{name:"extraData",type:"bytes"}]};function E(e,t){return T.apply(this,arguments)}function T(){return(T=(0,n.Z)(s().mark((function e(t,r){var n,c,u,i,l,f,d,p,h,b,y,m,k,w,x;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.blockNumber,c=r.blockTag,u=r.data,i=r.to,l=(0,Z.p)({data:u,abi:[S]}),f=l.args,d=(0,a.Z)(f,5),p=d[0],h=d[1],b=d[2],y=d[3],m=d[4],e.prev=3,G(i,p)){e.next=6;break}throw new g({sender:p,to:i});case 6:return e.next=8,j({data:b,sender:p,urls:h});case 8:return k=e.sent,e.next=11,(0,o.R)(t,{blockNumber:n,blockTag:c,data:(0,C.zo)([y,(0,O.E)([{type:"bytes"},{type:"bytes"}],[k,m])]),to:i});case 11:return w=e.sent,x=w.data,e.abrupt("return",x);case 16:throw e.prev=16,e.t0=e.catch(3),new v({callbackSelector:y,cause:e.t0,data:u,extraData:m,sender:p,urls:h});case 19:case"end":return e.stop()}}),e,null,[[3,16]])})))).apply(this,arguments)}function j(e){return D.apply(this,arguments)}function D(){return(D=(0,n.Z)(s().mark((function e(t){var r,a,n,c,o,u,i,l,f,d,p;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=t.data,a=t.sender,n=t.urls,c=new Error("An unknown error occurred."),o=0;case 3:if(!(o<n.length)){e.next=36;break}return u=n[o],i=u.includes("{sender}")||u.includes("{data}")?"GET":"POST",l="POST"===i?{data:r,sender:a}:void 0,e.prev=7,e.next=10,fetch(u.replace("{sender}",a).replace("{data}",r),{body:JSON.stringify(l),method:i});case 10:if(d=e.sent,p=void 0,null===(f=d.headers.get("Content-Type"))||void 0===f||!f.startsWith("application/json")){e.next=18;break}return e.next=15,d.json();case 15:p=e.sent.data,e.next=21;break;case 18:return e.next=20,d.text();case 20:p=e.sent;case 21:if(d.ok){e.next=24;break}return c=new x.Gg({body:l,details:(0,b.P)(p.error)||d.statusText,headers:d.headers,status:d.status,url:u}),e.abrupt("continue",33);case 24:if((0,M.v)(p)){e.next=27;break}return c=new w({result:p,url:u}),e.abrupt("continue",33);case 27:return e.abrupt("return",p);case 30:e.prev=30,e.t0=e.catch(7),c=new x.Gg({body:l,details:e.t0.message,url:u});case 33:o++,e.next=3;break;case 36:throw c;case 37:case"end":return e.stop()}}),e,null,[[7,30]])})))).apply(this,arguments)}}}]);
//# sourceMappingURL=297-4c35fdfed1b722cf8fb0.js.map